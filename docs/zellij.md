# Zellij リファレンス

## 基本設定

| 設定項目 | 値 | 説明 |
|---------|-----|------|
| `default_shell` | `zsh` | デフォルトシェル |
| `theme` | `tokyo-night` | テーマ |
| `default_layout` | `compact` | デフォルトレイアウト |
| `copy_on_select` | `true` | 選択時に自動コピー |
| `scroll_buffer_size` | `50000` | スクロールバッファサイズ |
| `pane_frames` | `true` | ペイン枠表示 |
| `auto_layout` | `true` | 自動レイアウト |
| `mouse_mode` | `true` | マウス操作有効 |
| `session_serialization` | `true` | セッション永続化 |

---

## キーバインド一覧

> **注意**: `clear-defaults=true` により、デフォルトキーバインドはすべて無効化されています。

### ノーマルモード

#### モード切替

| キー | 動作 |
|------|------|
| `Ctrl-g` | ロックモード |
| `Ctrl-p` | ペインモード |
| `Ctrl-t` | タブモード |
| `Ctrl-n` | リサイズモード |
| `Ctrl-m` | 移動モード |
| `Ctrl-s` | スクロールモード |
| `Ctrl-f` | 検索モード |
| `Ctrl-o` | セッションモード |

#### ペイン操作（クイック）

| キー | 動作 |
|------|------|
| `Alt-n` | 右にペイン作成 |
| `Alt-h` | 左のペイン/タブへ移動 |
| `Alt-l` | 右のペイン/タブへ移動 |
| `Alt-j` | 下のペインへ移動 |
| `Alt-k` | 上のペインへ移動 |
| `Alt-[` | 前のレイアウト |
| `Alt-]` | 次のレイアウト |
| `Alt-f` | フルスクリーン切替 |
| `Alt-=` | サイズ拡大 |
| `Alt--` | サイズ縮小 |

#### タブ切替（クイック）

| キー | 動作 |
|------|------|
| `Alt-1` ~ `Alt-9` | タブ1〜9へ移動 |

#### その他

| キー | 動作 |
|------|------|
| `Ctrl-q` | 終了 |

---

### ロックモード

すべてのキーバインドが無効になります。

| キー | 動作 |
|------|------|
| `Ctrl-g` | ノーマルモードに戻る |

---

### ペインモード (`Ctrl-p`)

| キー | 動作 |
|------|------|
| `Esc` / `Ctrl-c` / `Enter` | ノーマルモードに戻る |
| `h` / `←` | 左のペインへ移動 |
| `j` / `↓` | 下のペインへ移動 |
| `k` / `↑` | 上のペインへ移動 |
| `l` / `→` | 右のペインへ移動 |
| `n` / `r` | 右にペイン作成 |
| `d` | 下にペイン作成 |
| `x` | ペインを閉じる |
| `f` | フルスクリーン切替 |
| `z` | ペイン枠表示切替 |
| `w` | フローティングペイン切替 |
| `e` | 埋め込み/フローティング切替 |
| `c` | ペイン名変更モード |

---

### タブモード (`Ctrl-t`)

| キー | 動作 |
|------|------|
| `Esc` / `Ctrl-c` / `Enter` | ノーマルモードに戻る |
| `h` / `←` | 前のタブ |
| `l` / `→` | 次のタブ |
| `n` | 新規タブ |
| `x` | タブを閉じる |
| `s` | タブ同期切替 |
| `b` | ペインを分離 |
| `]` | ペインを右のタブへ分離 |
| `[` | ペインを左のタブへ分離 |
| `1` ~ `9` | タブ1〜9へ移動 |
| `Tab` | タブ切替 |
| `c` | タブ名変更モード |

---

### リサイズモード (`Ctrl-n`)

| キー | 動作 |
|------|------|
| `Esc` / `Ctrl-c` / `Enter` | ノーマルモードに戻る |
| `h` / `←` | 左方向に拡大 |
| `j` / `↓` | 下方向に拡大 |
| `k` / `↑` | 上方向に拡大 |
| `l` / `→` | 右方向に拡大 |
| `H` | 左方向に縮小 |
| `J` | 下方向に縮小 |
| `K` | 上方向に縮小 |
| `L` | 右方向に縮小 |
| `=` / `+` | 全体的に拡大 |
| `-` | 全体的に縮小 |

---

### 移動モード (`Ctrl-m`)

| キー | 動作 |
|------|------|
| `Esc` / `Ctrl-c` / `Enter` | ノーマルモードに戻る |
| `n` / `Tab` | ペインを移動 |
| `h` / `←` | 左へ移動 |
| `j` / `↓` | 下へ移動 |
| `k` / `↑` | 上へ移動 |
| `l` / `→` | 右へ移動 |

---

### スクロールモード (`Ctrl-s`)

| キー | 動作 |
|------|------|
| `Esc` / `Ctrl-c` / `Enter` | ノーマルモードに戻る |
| `e` | スクロールバックを編集 |
| `/` | 検索モードへ |
| `j` / `↓` | 1行下スクロール |
| `k` / `↑` | 1行上スクロール |
| `Ctrl-f` / `PageDown` | 1ページ下スクロール |
| `Ctrl-b` / `PageUp` | 1ページ上スクロール |
| `d` | 半ページ下スクロール |
| `u` | 半ページ上スクロール |
| `g` | 先頭へ |
| `G` | 末尾へ |

---

### 検索モード (`Ctrl-f`)

| キー | 動作 |
|------|------|
| `Esc` / `Ctrl-c` / `Enter` | ノーマルモードに戻る |
| `j` / `↓` | 1行下スクロール |
| `k` / `↑` | 1行上スクロール |
| `Ctrl-f` / `PageDown` | 1ページ下 |
| `Ctrl-b` / `PageUp` | 1ページ上 |
| `d` | 半ページ下 |
| `u` | 半ページ上 |
| `n` | 次の検索結果 |
| `N` | 前の検索結果 |
| `c` | 大文字小文字区別切替 |
| `w` | 折り返し検索切替 |
| `o` | 単語単位検索切替 |

---

### セッションモード (`Ctrl-o`)

| キー | 動作 |
|------|------|
| `Esc` / `Ctrl-c` / `Enter` | ノーマルモードに戻る |
| `d` | セッションからデタッチ |
| `w` | セッションマネージャー起動 |

---

### 共通キーバインド

以下のキーはほとんどのモードで使用可能（locked, renametab, renamepane 除く）:

| キー | 動作 |
|------|------|
| `Ctrl-g` | ロックモード |
| `Ctrl-q` | 終了 |

---

## レイアウト一覧

| レイアウト | ファイル | 説明 |
|-----------|----------|------|
| `compact` | `layouts/compact.kdl` | コンパクトなタブバー表示 |
| `dev` | `layouts/dev.kdl` | 開発用レイアウト（複数ペイン） |

---

## セッション管理コマンド

### スマートアタッチ機能

`zj` コマンドは、最新のアクティブなセッションに自動的にアタッチします:

- 既存のアクティブなセッションがある場合 → 最新のセッションにアタッチ
- アクティブなセッションがない場合 → 新規セッションを作成
- すでにzellij内にいる場合 → ネスト警告を表示
- EXITED状態のセッションは自動的にスキップ

### コマンド一覧

| コマンド | エイリアス | 説明 |
|---------|-----------|------|
| `zj` | - | スマートアタッチ（最新セッションに自動アタッチ、またはなければ新規作成） |
| `zj <name>` | - | 指定セッションにアタッチ、またはなければ新規作成 |
| `zellij` / `zjn` | - | 強制的に新規セッション開始（既存セッションがあっても無視） |
| `zellij attach` | `zja` | 既存セッションにアタッチ（セッション名を対話的に選択） |
| `zellij attach <name>` | `zja <name>` | 指定セッションにアタッチ |
| `zellij list-sessions` | `zjl` | セッション一覧表示 |
| `zellij kill-session <name>` | `zjk <name>` | セッション強制終了 |
| `zellij delete-session <name>` | - | セッション削除 |
| `zellij --layout dev` | `zjd` | dev レイアウトで新規セッション開始 |
| `zellij --layout compact` | `zjc` | compact レイアウトで新規セッション開始 |

### 使用例

```bash
# 基本的な使用方法
zj              # 最新セッションにアタッチ、またはなければ新規作成

# 名前付きセッション
zj myproject    # "myproject" セッションにアタッチ、またはなければ新規作成

# 新規セッションを強制作成
zjn             # 既存セッションがあっても常に新規作成

# レイアウト指定で新規作成
zjd             # dev レイアウトで新規セッション
zjc             # compact レイアウトで新規セッション

# セッション管理
zjl             # 全セッション一覧
zjk old-session # 指定セッションを終了
```

---

## プラグイン一覧

| プラグイン | 場所 | 説明 |
|-----------|------|------|
| `tab-bar` | `zellij:tab-bar` | タブバー |
| `status-bar` | `zellij:status-bar` | ステータスバー |
| `strider` | `zellij:strider` | ファイルブラウザ |
| `compact-bar` | `zellij:compact-bar` | コンパクトバー |
| `session-manager` | `zellij:session-manager` | セッション管理 |

---

## テーマ一覧

| テーマ名 | 説明 |
|---------|------|
| `tokyo-night` | Tokyo Night（デフォルト） |
| `catppuccin-mocha` | Catppuccin Mocha |
| `gruvbox-dark` | Gruvbox Dark |

テーマの変更:
```kdl
// config.kdl
theme "catppuccin-mocha"
```
